<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LeerKids | Menú de pantallas</title>
    <!-- Tailwind por CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="color-scheme" content="light dark" />
    <style>
      html,
      body {
        height: 100%;
      }
      /* Suaviza el scroll horizontal del tab bar en móviles */
      .tabs-scroll::-webkit-scrollbar {
        height: 6px;
      }
      .tabs-scroll::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.15);
        border-radius: 9999px;
      }
    </style>
  </head>
  <body
    class="min-h-screen bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-100"
  >
    <div class="min-h-screen flex flex-col">
      <!-- Header -->
      <header
        class="border-b border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-950/60 backdrop-blur"
      >
        <div
          class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between"
        >
          <h1 class="text-lg font-extrabold tracking-tight">Salon de Clases</h1>
          <div class="text-xs text-slate-500">Es Divertido Aprender</div>
        </div>
        <!-- Tabs -->
        <nav
          id="tabBar"
          class="tabs-scroll mx-auto max-w-6xl px-2 pb-2 overflow-x-auto"
        >
          <!-- Botones se inyectan por JS -->
        </nav>
      </header>

      <!-- Contenido -->
      <main class="flex-1">
        <!-- Viewer: usa iframe para que cada HTML mantenga sus estilos/JS -->
        <iframe
          id="viewer"
          title="Contenido"
          class="w-full h-full min-h-[calc(100vh-120px)] border-0 bg-white dark:bg-slate-950"
          loading="lazy"
          referrerpolicy="no-referrer"
        >
        </iframe>
      </main>

      <!-- Footer mini -->
      <footer
        class="border-t border-slate-200 dark:border-slate-800 text-center text-xs py-3 text-slate-500"
      >
        Tip: puedes abrir directamente una pestaña con <code>#id</code> en la
        URL (ej. <code>#leer</code>).
      </footer>
    </div>

    <script>
      /**
       * === Cómo añadir más pestañas ===
       * 1) Agrega un objeto al arreglo TABS con: id, title, url (archivo .html).
       * 2) No necesitas tocar nada más.
       */
      const TABS = [
        { id: "leer", title: "LeerKids (ES)", url: "leer_kids_es.html" },
        {
          id: "ciencias",
          title: "Repaso Ciencias",
          url: "RepasoCiencias.html",
        },
        // { id: 'otra',  title: 'Mi otra pantalla',  url: 'mi_otra_pantalla.html' },
      ];

      const tabBar = document.getElementById("tabBar");
      const viewer = document.getElementById("viewer");

      // Persistir última pestaña
      const LS_KEY = "index-tabs:last";

      function renderTabs(activeId) {
        tabBar.innerHTML = "";
        TABS.forEach((t) => {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.setAttribute("data-id", t.id);
          btn.className = [
            "whitespace-nowrap",
            "px-4 py-2 rounded-xl text-sm font-semibold",
            "transition-colors",
            "mr-2 mb-2 border",
            t.id === activeId
              ? "bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-slate-900 dark:text-slate-100 shadow"
              : "bg-slate-100/70 dark:bg-slate-800/60 border-transparent text-slate-600 dark:text-slate-300 hover:bg-white hover:text-slate-900 dark:hover:bg-slate-700",
          ].join(" ");
          btn.textContent = t.title;
          btn.addEventListener("click", () => activateTab(t.id));
          tabBar.appendChild(btn);
        });
      }

      function activateTab(id) {
        const tab = TABS.find((x) => x.id === id) || TABS[0];
        if (!tab) return;
        // Carga en iframe
        viewer.src = tab.url;
        // Marca activa
        renderTabs(tab.id);
        // Guarda estado
        try {
          localStorage.setItem(LS_KEY, tab.id);
        } catch {}
        // Actualiza hash sin hacer scroll
        if (location.hash !== "#" + tab.id) {
          history.replaceState(null, "", "#" + tab.id);
        }
      }

      // Soporte para hash y localStorage
      function getInitialTabId() {
        const fromHash = (location.hash || "").replace("#", "");
        if (fromHash && TABS.some((t) => t.id === fromHash)) return fromHash;
        try {
          const last = localStorage.getItem(LS_KEY);
          if (last && TABS.some((t) => t.id === last)) return last;
        } catch {}
        return TABS[0]?.id;
      }

      // Reacciona si el usuario cambia el hash manualmente
      window.addEventListener("hashchange", () => {
        const id = (location.hash || "").replace("#", "");
        if (TABS.some((t) => t.id === id)) activateTab(id);
      });

      // Ajusta alto del iframe cuando cambia el tamaño de la ventana
      function resizeViewer() {
        // Header + tabs + footer ≈ 120px; el min-h ya cubre, pero ajustamos por si acaso
        viewer.style.height = window.innerHeight - 120 + "px";
      }
      window.addEventListener("resize", resizeViewer);

      // Init
      renderTabs(getInitialTabId());
      activateTab(getInitialTabId());
      resizeViewer();
    </script>
  </body>
</html>
